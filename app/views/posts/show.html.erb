<%= render 'communities/header' %>
<section class="w-full flex justify-center bg-white items-center py-4 mt-8 rounded-md">
	<%= render 'posts/vote', post: @post %>
	<article class="flex flex-col justify-center gap-2  ">
		<span class="text-gray-400 text-sm">Posted by u/<%="#{@post.user.username} #{time_ago_in_words(@post.created_at)}" %> ago</span>
		<h1 class="font-bold text-xl">
			<%= @post.title %>
		</h1>
		<p>
			<%= @post.body %>
		</p>
		<% if current_user == @post.user %>
			<%= button_to sanitize("&#128465"), community_post_path(@post.community.slug, @post.slug),method: :delete, form: { data: {turbo_confirm: "Are you sure?"}}  %>
		<% end %>
	</article>

</section>

<section class="flex flex-col gap-2 mt-4">
	<%= render 'comments/form' %>
	<h2 class="font-bold mb-2">Comments</h2>
	<ul class="flex flex-col gap-2 mb-2">
		<% @post.comments.each do |comment| %>
			<%= render 'comments/comment', comment: comment %>
		<% end %>
	</ul>
</section>
